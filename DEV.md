# ULF Development

I had lots of troubles configuring luarocks to use neovim as lua interpreter.

This one put me on track and is not so complicated

<https://github.com/nvim-neorocks/neorocks/blob/master/testproject/run-tests.sh>

## Luarocks

Example of a rocks tree:

```
{base}                (base rocks tree directory)
  ├── bin              (deployment of command line scripts)
  ├── lib
  │    ├── luarocks
  │    │    └── rocks  (contains manifest and sub-dirs with rocks)
  │    │
  │    └── lua
  │         └── 5.1    (deployment of binary modules)
  │
  └── share
       └── lua
            └── 5.1    (deployment of Lua modules)
```

### Installing Rocks

For `LuaJIT` you need to set version to `5.1`. The `--local` flag can be used
if you do not want to use the package maintainer's rocks tree.

```sh
luarocks --lua-version 5.1 --local install inspect

```

## Test Setup

ULF should be tested with latest Neovim and Luajit. The test setup should be as close
as possible to the Luarocks test specifications.

### Manual Testing

Busted command for `Neovim` using `nlua` as Lua interpreter:

hint: using eval

```sh
eval $(luarocks --lua-version=5.1 path)

hint: find lua.h using fd, use the --no-ignore on a mac
```

```sh
fd --no-ignore -g 'lua.h' /opt

```

### Luarocks config

#### Luajit

#### Neovim

## Packages

### ulf.test

In my Neovim configuration, I have a module to detect various setups for running
Busted tests with `Neotest`. The module was also intended to include useful
utilities like a debug printer.

This works only when using `nlua` as the Lua interpreter or by adding the
Neovim module to the Lua search path.

Solution:
Package everything in the ulf.test module as a rock, and you're good to go.

Example:

This could be `spec/init.lua`

```lua

local TestEnvironment = require("ulf.test.environment")
TestEnvironment.init()
```

## Useful Projects

<https://github.com/ur4ltz/awesome-stars>

- [creating your own Awesome List by GitHub stars](https://github.com/maguowei/starred)
- [A curated list of my GitHub stars! Generated by starred](https://github.com/ur4ltz/awesome-stars)
- [tabular](https://github.com/hishamhm/tabular)
  Tabular representation of Lua data (pretty print for tables)
- [lume](https://github.com/rxi/lume): Lua functions geared towards game development
- [Jumper](https://github.com/Yonaba/Jumper): Graph algorithms
- [luafun](https://github.com/luafun/luafun): FPP
- [lua-log](https://github.com/moteus/lua-log): logging
- [lua-path](https://github.com/moteus/lua-path): path manipulations
- [ludash](https://github.com/luvitrocks/luadash): FPP
- [lua-stdlib](https://github.com/lua-stdlib/lua-stdlib): Lua stdlib
- [RxLua](https://github.com/bjornbytes/RxLua): Reactive Extensions for lua
- [Microlight](https://github.com/stevedonovan/Microlight):
  A little library of useful Lua functions, intended as the 'light' version of Penlight
